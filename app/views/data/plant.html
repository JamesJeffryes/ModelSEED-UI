


<div class="content-header" flex>

    Build Model
    <br><br>
</div>    

<div class="container">

  <div layout="row">    

    <span layout-align="start"><i>Select Template Model</i></span>

      <div flex="45" class="vertical-center" layout="row" layout-align="start">
      
    
        <select ng-init="selectedTemplate = options[0]" 
            ng-model="selectedTemplate" 
            ng-options="option.value for option in options">
    
        </select>       
        
      </div>
      
  </div>
    
  <div>{{$scope.setDefaultTemplate()}}</div>
   
  <!-- --------------------------------------------------------- FAST A ----------------------------------------------------------- -->  
  
  <md-tabs md-selected="tabs.tabIndex" md-no-ink md-dynamic-height>

  <md-tab>
    <md-tab-label>
      UPLOAD FASTA
    </md-tab-label>

  <md-tab-body>
    
  <div layout="row">    

    <div layout="column">
          
        <form id="upload-form" class="upload-form form-horizontal">        
            <div class="form-group">
                <br><br>
                <label class="control-label"> <i>Select fasta file: </i> </label>
                <label class="md-button md-primary md-raised">
                    Choose File...
                    <input
                        name="upload"
                        enctype="multipart/form-data"
                        type="file"
                        onchange="angular.element(this).scope().selectFile(this.files)"/>
                </label>
                {{selectedFiles[0].name}}
            </div>
        </form>
        
        <!--  
        <div flex="30"  class="hidden" layout="row" layout-align="start">            
		  <md-input-container md-no-float >
		    <select flex="30" ng-model="form.selectedTaxa" class="form-control">
		        <option>Plant</option>
		        <option>Microbe</option>        
		    </select>        
		  </md-input-container>
        </div>
        -->
        
        <div flex="65" class="vertical-center" layout="row" layout-align="start">
          <form>    
          <md-input-container flex md-no-float>
              <input flex ng-model="form.name" placeholder="Name Model to build" required/>
          </md-input-container>
                    
          <md-button class="md-primary md-raised"
            ng-click="startUpload(  )"
            ng-disabled="!(selectedFiles && form.name)">
            Start Upload
            <br>
          </md-button>                 
          </form>
        </div>             
        
    </div>
    
  </div>
  
  </md-tab-body>

  </md-tab>


  <!-- --------------------------------------------------------- PATRIC -------------------------------------------------------------- -->

  <md-tab>
  
  <md-tab-label>
      PATRIC
  </md-tab-label>
  
  <md-tab-body>
  <br><br>

  <div>

    <div class="table-controls" layout="row" >
        <md-input-container md-no-float flex="45">
            <md-icon class="material-icons">search</md-icon>
            <input ng-model="opts.query" type="text" placeholder="Search models">
        </md-input-container>
        
        <md-input-container pagination
            pagination-offset="opts.offset"
            pagination-limit="opts.limit"
            pagination-total="filtered.length"
            layout="row"
            layout-align="end center" flex>
        </md-input-container>
        
    </div>

    <div ng-repeat-start="item in (filtered = ( microbes | filter: opts.query) | limitTo : opts.limit : opts.offset)"
         ng-click="showRelatedData(item)"
         class="row-hover my-model">

        <model-item layout="row">

            <div flex="10" class="vertical-center">
                    {{item.name}}
                <br>
            </div>

        </model-item>                        
    </div>
                
    <div ng-repeat-end ng-if="item.relatedFBAs || item.relatedGapfills" class="small-tabs my-model-tabs">
    </div>
    
  </div>
    
  <div>
        <br><br>
        <button class="md-primary md-raised md-button" ng-click="reconstruct($event)" >Build Model</button>
        <!-- <button class="md-primary md-raised md-button" ng-click="reconstruct($event, selectedPublic)" >Build Model</button> -->
  </div>
  
  </md-tab-body>
    
  </md-tab>

  <!-- --------------------------------------------------------- RAST -------------------------------------------------------------- -->

  <md-tab>
  <md-tab-label>
      RAST
  </md-tab-label>
  
    <md-tab-body>
  <br><br>

  <div>

    <div class="table-controls" layout="row" >
        <md-input-container md-no-float flex="45">
            <md-icon class="material-icons">search</md-icon>
            <input ng-model="opts.query" type="text" placeholder="Search models">
        </md-input-container>
        
        <md-input-container pagination
            pagination-offset="opts.offset"
            pagination-limit="opts.limit"
            pagination-total="filtered.length"
            layout="row"
            layout-align="end center" flex>
        </md-input-container>
        
    </div>

    <div ng-repeat-start="item in (filtered = ( rastMicrobes | filter: opts.query) | limitTo : opts.limit : opts.offset)"
         ng-click="showRelatedData(item)"
         class="row-hover my-model">

        <model-item layout="row">

            <div flex="10" class="vertical-center">
                    {{item.name}}
                <br>
            </div>

        </model-item>                        
    </div>
                
    <div ng-repeat-end ng-if="item.relatedFBAs || item.relatedGapfills" class="small-tabs my-model-tabs">
    </div>
    
  </div>
    
  <div>
        <br><br>
        <button class="md-primary md-raised md-button" ng-click="reconstruct($event)" >Build Model</button>
        <!-- <button class="md-primary md-raised md-button" ng-click="reconstruct($event, selectedPublic)" >Build Model</button> -->
  </div>
  
  </md-tab-body>
    
  </md-tab>
  <!-- ----------------------------------------------------------------------------------------------------------------------------- -->

</md-tabs>
    

<div ng-if="error" class="alert alert-danger">{{error}}</div>

</div>


