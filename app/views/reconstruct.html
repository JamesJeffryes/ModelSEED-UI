

<div class="h2">Public Genomes</div>
<hr class="no-margin">

<!--<ng-include src="'app/views/apps/reconstruct.html'"></ng-include>-->

<div class="table-controls">
    <div layout="row" layout-align="start start" class="pull-left">

        <div class="btn-group table-settings">
            <button ng-click="showMenu()" type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                <i class="glyphicon glyphicon-cog"></i> <span class="caret"></span>
            </button>
            <ul class="dropdown-menu dropdown-menu-visible table-settings">
                <li ng-repeat="item in columns">
                    <div ng-click="toggle(item.prop, opts.visible)">
                      <i class="fa {{exists(item.prop, opts.visible) ? 'fa-check-square-o' : 'fa-square-o'}}"></i>{{item.label}}
                    </div>
                </li>
            </ul>
        </div>


        <i class="fa fa-search query-opt"></i>

        <md-input-container md-no-float>
            <input ng-model="opts.query" type="text" placeholder="Search PATRIC genomes" class="query-input">
        </md-input-container>

    </div>
    <md-progress-circular ng-if="loading"
                          md-mode="indeterminate"
                          class="table-loading pull-left"
                          md-diameter="20">
    </md-progress-circular>


    <div class="pull-right">
        <!--
        <select ng-model="opts.limit" class="btn btn-default">
            <option>25</option>
            <option>100</option>
            <option>250</option>
        </select>-->

        <span pagination>
            <div ng-disabled="opts.offset == 0" class="btn btn-default btn-sm" ng-click="prev()">
                <i class="fa fa-chevron-left"></i> prev
            </div>
            <div class="btn btn-default btn-sm" ng-click="next()">next
                <i class="fa fa-chevron-right"></i>
            </div>
        </span>
    </div>

    <div class="pull-right query-opt">
        {{opts.offset+1}}-{{opts.offset+opts.limit}} of {{genomes.numFound}} results
    </div>

    <!--
    <div class="pull-right">
        <div ng-if="selected"
             ng-click="reconstruct($event, selectedID)"
             class="btn btn-primary btn-sm btn-reconstruct">
            Reconstruct
        </div>
    </div>-->


</div>

<table class="table">
    <thead sortable>
        <tr>
            <th></th>
            <th ng-repeat="h in opts.visible" ng-click="sortBy($event,h)">
                {{getLabel(h)}}
            </th>
        </tr>
    </thead>

    <tbody>
        <tr ng-repeat="g in genomes.docs"
            ng-click="selectGenome(g)"
            class="table-hover">

            <td>
                <!--<i class="fa {{selected.genome_id == g.genome_id ? 'fa-circle' : 'fa-circle-o'}}"></i>-->
            </td>
            <td ng-repeat="col in opts.visible">{{g[col]}}</td>

            <td ng-if="genomes.docs == 0 && !loading">No genome found</td>
        </tr>
    </tbody>
</table>
