


<div class="row">
    <div class="col-md-5">
        <div class="h2">Comparative Viewer</div>
    </div>

    <div class="col-md-7" ng-if="MV.models.length > 0">
        <md-radio-group ng-model="VizOpts.flux" ng-change="updateOptions()" class="pull-right">
            <md-radio-button ng-value="'absFlux'"> |flux|</md-radio-button>
            <md-radio-button ng-value="'flux'"> flux </md-radio-button>
        </md-radio-group>
    </div>
</div>

<hr class="no-margin">


<div ng-if="MV.models.length == 0">
    <br>
    <div class="text-danger">No data selected</div>
    Add data by selecting FBA simulations from the <a ui-sref="app.myModels">My Models</a> page.
</div>



<div ng-if="MV.models.length > 0" >

    <md-tabs md-selected="topLevelTabs.selectedIndex" md-no-ink md-dynamic-height md-selected="topLevelTabs.selectedIndex" >
    	<md-tab>
    		<md-tab-label>Heatmap</md-tab-label>

    		<md-tab-body>
                <div heatmap="heatmapData"></div>

                <md-progress-circular ng-if="loading" md-mode="indeterminate"></md-progress-circular>
    		</md-tab-body>

    	</md-tab>

		<md-tab>
			<md-tab-label>Pathways</md-tab-label>
			<md-tab-body>
				<ng-table-two table-header="mapHeader"
						table-data="maps"
						table-opts="mapOpts"
						table-loading="loadingMaps"
						table-placeholder="Search maps">
				</ng-table-two>
			<md-tab-body>
		</md-tab>

		<md-tab ng-repeat="tab in Tabs.tabs">
			<md-tab-label>{{tab.name.length > 19 ? tab.name.slice(0, 20)+'...' : tab.name}}
				<span ng-if="tab.removable" ng-click="Tabs.removeTab(tab)" class="fa fa-remove hover"></span>
			</md-tab-label>
			<md-tab-body>
				<div pathway="tab.mapID" models="models" fbas="fbas"></div>
				<br>
			</md-tab-body>
		</md-tab>

    </md-tabs>


    <!--
    <md-tabs md-selected="selectedIndex" flex>
        <md-tab ng-repeat="tab in tabs">
            {{tab.title}}
            <span ng-if="tab.removable"
                  ng-click="removeTab(tab)"
                  class="fa fa-remove hover">
            </span>

        </md-tab>
    </md-tabs>


    <section class="md-tabs-content">
        <div role="tabpanel"
             id="tab1-content"
             aria-labelledby="tab1"
             ng-show="selectedIndex == 0"
             md-swipe-left="next()"
             md-swipe-right="previous()">

            <div heatmap></div>

            <div ng-if="MV.models.length" class="viz-tip text-muted">
                Use the mouse wheel (or double-click) to zoom. Click and drag to pan.
            </div>

            <md-progress-circular ng-if="loading"
                                  md-mode="indeterminate"
                                  class="text-center"
                                  md-diameter="40">
            </md-progress-circular>

        </div>



            <div ng-if="loading">loading...</div>

            <ng-table-two table-header="mapHeader"
                    table-data="maps"
                    table-opts="mapOpts"
                    table-loading="loadingMaps"
                    table-placeholder="Search maps">
            </ng-table-two>



    <md-tab ng-repeat="tab in Tabs.tabs">
        <md-tab-label>{{tab.title}}
            <span ng-if="tab.removable" ng-click="Tabs.removeTab(tab)" class="fa fa-remove hover"></span>
        </md-tab-label>
        <md-tab-body>
            <div pathway="tab.title" model="model"></div>
            <br>
        </md-tab-body>
    </md-tab>
    -->


    <div ng-if="MV.models.length && !loading" class="viz-legend" legend min="minFlux" max="maxFlux"></div>

    <div ng-if="MV.models.length && !loading && topLevelTabs.selectedIndex == 0" class="viz-tip text-muted">
        Use the mouse wheel (or double-click) to zoom. Click and drag to pan.
    </div>

</div>
